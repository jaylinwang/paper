/**
 * onepice - this is a simple theme for ghost
 * @version 1.0.0
 * @link    https://github.com/guovz/onepice#readme
 * @author  Jaylin Wang (http://guovz.com)
 * @license MIT
 */
var updateCounter=function(t){var o=new AV.Query("Counter");o.equalTo("url",location.pathname),o.first().then(function(o){if(o)o.set("time",o.get("time")+1),o.save().then(function(t){console.log("update a counter:"+t.get("url"))},function(t){console.log("Error: "+t.code+" "+t.message)});else{var e=new t;e.set("url",location.pathname),e.set("time",1),e.save().then(function(t){console.log("add a counter:"+t.get("url"))},function(t){console.log("Error: "+t.code+" "+t.message)})}},function(t){console.log("Error: "+t.code+" "+t.message)})},showTime=function(t){var o=new AV.Query("Counter");$(".visit").each(function(){var t=$(this).data("url"),e=$(this);o.equalTo("url",t),o.first().then(function(t){var o=0;t&&(o=t.get("time")),e.find(".visit-count").text(o)},function(t){console.log("Error: "+t.code+" "+t.message)})})};!function(t){if(hljs.initHighlightingOnLoad(),t.get(ghost.url.api("posts",{fields:"id"})).done(function(o){var e=o.posts.length;t('[data-toggle="postcount"]').text(e)}).fail(function(t){console.log(t)}),t.get(ghost.url.api("tags",{fields:"id"})).done(function(o){var e=o.tags.length;t('[data-toggle="tagcount"]').text(e)}).fail(function(t){console.log(t)}),t.get(ghost.url.api("users/1")).done(function(o){var e=o.users[0];t('[data-toggle="userimage"]').attr("src",e.image),t('[data-toggle="username"]').text(e.name.toUpperCase()),t('[data-toggle="userlocation"]').text(e.location),t('[data-toggle="userbio"]').text(e.bio)}).fail(function(t){console.log(t)}),AV){t(".visit-wrapper").show();var o=AV.Object.extend("Counter");showTime(o),updateCounter(o)}}(jQuery),function(t){var o='[data-toggle="totop"]',e='[data-toggle="sidebar"]',n='[data-toggle="menu"]',a=function(){t("html, body").animate({scrollTop:0},200)},i=function(o){t("body").toggleClass("fold")},l=function(o){var e=t(o.target).closest('[data-toggle="menu"]'),n=t(e.data("target"));n.toggleClass("open")};t(document).on("click.totopToggle",o,a),t(document).on("click.sidebarToggle",e,i),t(document).on("click.menuToggle",n,l)}(jQuery);